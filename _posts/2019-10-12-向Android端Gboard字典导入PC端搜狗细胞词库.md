---
title:		向Android端Gboard字典导入PC端搜狗细胞词库
date:		2019-10-12
layout:		post
comments:	true
categories: 输入法
tags:		输入法 Gboard 词库
author:		Esirn
mathjax:	true
excerpt: 	需要[深蓝词库转换2.6](https://github.com/studyzy/imewlconverter/releases)
---

# 环境
- Android 5.1.1
- Gboard 8.7.10.272217667-release -armeabi-v7a

# PC端工具需要
- 词库转换器（[深蓝词库转换2.6](https://github.com/studyzy/imewlconverter/releases)）
- 编辑器（需要有正则表达式的替换功能以及改编字符编码的功能，个人用的[Notepad++7.8](https://notepad-plus-plus.org/downloads/v7.8/)）

# 步骤
- 在[搜狗词库官网](https://pinyin.sogou.com/dict/)下载自己需要的细胞词库。文件格式为.scel，双击可以导入到搜狗输入法的词库。现在不用双击导入，记住文件路径即可。
- 用词库转换器将.scel的搜狗细胞词库转为搜狗拼音txt或自定义格式的.txt文件：
  - 打开词库转换器，导入搜狗细胞词库（可多选），选择文件时可能要先在右下角选择文件格式。
  - 导出框选择最下面的“自定义”，进入“自定义词库编码”界面。
  - 取消勾选“词频”；“每个编码之间的分隔符”改为“空格”，“编码汉字词频之间的分隔符”改为“Tab”，点击转换。
  - 导出至.txt文件。
- 向Gboard的字典中随便添加一条记录，以.zip格式导出到电脑并解压。
- 参照解压文件的格式，用编辑器调整刚才第2步的.txt文件（字符编码、结尾“zh-CN”等）。
  - 用编辑器打开，首行粘贴上解压文件的首行。（可能只是注释而没必要粘贴）
  - 在编辑器“编码”中查看是否为UTF-8，不是或不知道的话可以点击下面的“转为UTF-8编码”。
  - 在每行结尾添加“zh-CN”：用快捷键“Ctrl+H”打开编辑器“替换”功能，勾选左下角的“正则表达式”，查找目标为“$”表示结尾，“替换为”填“\tzh-CN”。
- 将上一步得到的.txt文件压缩到新的.zip文件，传到手机中。最好传到容易找到的路径，比如自己在“文件管理”中新建一个文件夹。
- 在Gboard字典界面选择导入上一步的.zip文件，此时手机可能会出现一两分钟的轻微卡顿和黑屏，耐心等待即可。我导入的词库大约有7K行，黑屏了两分钟左右。
- 检查一下字典中是否正常，乱码可能就是第4步字符编码的问题，清空字典重来。想清空词库不能“删除用户词库和数据”，只能去手机设置“应用程序管理”中清除Gboard的数据，卸载重新安装应该也行。

# 参考资料
- [Gboard导入简体中文词库，详细操作教程。](https://blog.csdn.net/ADRGodC/article/details/100858358)
- [深蓝词库转换2.6版发布——支持Emoji、颜文字和小鹤双拼](https://www.cnblogs.com/studyzy/p/10992274.html)

# Android端Gboard的个人评价
## 缺点
- 机器学习与字典（词库）分离且前者无法导出，且通过查字典找到的词语不会进入机器学习成果。
- 不知账号同步情况怎样。
- 滑行输入与普通输入用的是同一套学习成果，但滑行输入不会查字典。综合上一点，即使普通输入查字典得到了某个词，也不会加入到机器学习中，下次滑行输入时既不能查字典也没有学习成果可查。
- 如果英文输入可以快捷选择是否联想则更好（参照手机搜狗输入法）
- 没有一键清空
- 词库格式，每行后面需要“zh-CN”来标注语言，在词库转换时有轻微不便。另外需要注意字符编码。想清空词库不能“删除用户词库和数据”，只能去手机设置“应用程序管理”中清除Gboard的数据，卸载重新安装应该也行。